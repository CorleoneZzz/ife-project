<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>email</title>
</head>
<body>
<div class="wrapper">
    <input id="email-input" type="text">
    <ul id="email-sug-wrapper" class="email-sug"></ul>
</div>
<script>
    var postfixList = ['163.com', 'gmail.com', '126.com', 'qq.com', '263.net'];
    //获取用户输入
    var input = document.getElementById("email-input");
    input.addEventListener("input", getInput);

    function getInput() {
        // console.log(inputText);
        return input.value;
    }

    input.addEventListener("input", listContent);

    //将用户输入与邮箱后缀结合
    function listContent() {
        var inputText = getInput();
        var showContent = [];
        for (let i = 0; i < postfixList.length; i++) {
            showContent.push(inputText + postfixList[i]);
            // console.log(showContent);
        }
        return showContent;
    }

    input.addEventListener("input", listContentShow);

    //显示到email-sug-wrapper区域
    function listContentShow() {
        removeShow();
        var showContent = listContent();
        var show = document.getElementById("email-sug-wrapper");
        for (let i = 0; i < postfixList.length; i++) {
            var node = document.createElement("li");
            var nodes = document.createTextNode(showContent[i]);
            // console.log(showContent[i]);
            node.appendChild(nodes);
            show.appendChild(node);
            var li = document.getElementsByTagName("li");
            li[i].style.listStyleType = "none";
            li[i].style.backgroundColor = "#CCCCCC";
            li[i].addEventListener("mouseover", function () {
                li[i].style.backgroundColor = "#FFCC66";
            });
            li[i].addEventListener("mouseout", function () {
                li[i].style.backgroundColor = "#CCCCCC";
            });
            li[i].addEventListener("click", function () {
                document.getElementById("email-input").value = li[i].textContent;
                removeShow();
            })
        }
    }

    function removeShow() {
        var show = document.getElementsByTagName("li");
        for (let i = show.length - 1; i >= 0; i--) {
            show[i].parentNode.removeChild(show[i])
        }
    }

    input.addEventListener("input", showController);

    //用户不输入提示框不显示
    function showController() {
        if (input.value == "") {
            removeShow();
        }
    }

    // function showStyle() {
    //     listContentShow();
    // }
    //
    // function hideStyle() {
    //
    // }

    window.onload = showController;
</script>
</body>
</html>